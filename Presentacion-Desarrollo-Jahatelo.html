<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desarrollo Jahatelo - Resumen de Implementaciones</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }

        .page {
            background: white;
            width: 210mm;
            min-height: 297mm;
            margin: 20px auto;
            padding: 40px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            page-break-after: always;
        }

        @media print {
            body {
                background: white;
            }
            .page {
                margin: 0;
                box-shadow: none;
                page-break-after: always;
            }
        }

        h1 {
            color: #822DE2;
            font-size: 36px;
            margin-bottom: 20px;
            border-bottom: 4px solid #822DE2;
            padding-bottom: 10px;
        }

        h2 {
            color: #822DE2;
            font-size: 28px;
            margin-top: 30px;
            margin-bottom: 15px;
            border-left: 5px solid #822DE2;
            padding-left: 15px;
        }

        h3 {
            color: #555;
            font-size: 20px;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        h4 {
            color: #666;
            font-size: 16px;
            margin-top: 15px;
            margin-bottom: 8px;
        }

        p {
            margin-bottom: 12px;
            text-align: justify;
        }

        ul, ol {
            margin-left: 25px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #c7254e;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.4;
        }

        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            margin-bottom: 15px;
        }

        .success {
            background: #d4edda;
            padding: 15px;
            border-left: 4px solid #28a745;
            margin-bottom: 15px;
        }

        .info {
            background: #d1ecf1;
            padding: 15px;
            border-left: 4px solid #17a2b8;
            margin-bottom: 15px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background: #822DE2;
            color: white;
            font-weight: bold;
        }

        tr:nth-child(even) {
            background: #f9f9f9;
        }

        .cover {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            min-height: 800px;
        }

        .cover h1 {
            font-size: 48px;
            border: none;
            margin-bottom: 30px;
        }

        .cover .subtitle {
            font-size: 24px;
            color: #666;
            margin-bottom: 50px;
        }

        .cover .metadata {
            font-size: 16px;
            color: #999;
            margin-top: 100px;
        }

        .toc {
            margin-top: 40px;
        }

        .toc ul {
            list-style: none;
            margin-left: 0;
        }

        .toc li {
            margin-bottom: 15px;
            font-size: 18px;
        }

        .toc a {
            color: #822DE2;
            text-decoration: none;
        }

        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

<!-- PORTADA -->
<div class="page cover">
    <h1>Jahatelo</h1>
    <div class="subtitle">Resumen de Desarrollo e Implementaciones</div>
    <div class="subtitle">Enero 2026</div>
    <div class="metadata">
        <p>MBARETECH</p>
        <p>Desarrollo Backend & Mobile</p>
    </div>
</div>

<!-- √çNDICE -->
<div class="page">
    <h1>√çndice</h1>
    <div class="toc">
        <ul>
            <li>1. Resumen Ejecutivo</li>
            <li>2. Implementaciones Web Admin</li>
            <li>3. Sistema de Contacto e Inbox</li>
            <li>4. Mejoras Mobile App</li>
            <li>5. Sistema de Splash Screen</li>
            <li>6. Archivos T√©cnicos Clave</li>
            <li>7. Errores y Resoluciones</li>
            <li>8. Stack Tecnol√≥gico</li>
        </ul>
    </div>
</div>

<!-- RESUMEN EJECUTIVO -->
<div class="page">
    <h1>1. Resumen Ejecutivo</h1>

    <div class="success">
        <strong>Proyecto:</strong> Jahatelo App & Web Platform<br>
        <strong>Per√≠odo:</strong> Enero 2026<br>
        <strong>Implementaciones completadas:</strong> 7 m√≥dulos principales
    </div>

    <h2>Objetivos Alcanzados</h2>

    <h3>üéØ Mejoras Administrativas</h3>
    <ul>
        <li>Reorganizaci√≥n del men√∫ de administraci√≥n con secci√≥n "Configuraci√≥n"</li>
        <li>Sistema de carga de im√°genes mejorado para publicidad</li>
        <li>Sistema de inbox para gesti√≥n de mensajes de contacto</li>
    </ul>

    <h3>üì± Mejoras Mobile</h3>
    <ul>
        <li>Reorganizaci√≥n de la pantalla de perfil</li>
        <li>Implementaci√≥n de formulario de contacto</li>
        <li>Optimizaci√≥n del splash screen con animaci√≥n Lottie</li>
    </ul>

    <h3>üîß Infraestructura</h3>
    <ul>
        <li>Endpoint gen√©rico de upload a S3</li>
        <li>Modelo de base de datos para mensajes de contacto</li>
        <li>APIs REST para gesti√≥n de contactos</li>
    </ul>
</div>

<!-- IMPLEMENTACIONES WEB ADMIN -->
<div class="page">
    <h1>2. Implementaciones Web Admin</h1>

    <h2>2.1 Reorganizaci√≥n del Men√∫ Admin</h2>

    <div class="highlight">
        <strong>Archivo:</strong> <code>app/admin/layout.tsx</code>
    </div>

    <h3>Estructura Implementada</h3>
    <ul>
        <li><strong>Dashboard</strong> - Vista principal</li>
        <li><strong>Moteles</strong> - Gesti√≥n de establecimientos</li>
        <li><strong>Prospectos</strong> - Leads y contactos comerciales</li>
        <li><strong>Publicidad</strong> - Gesti√≥n de anuncios</li>
        <li><strong>Inbox</strong> - Mensajes de contacto</li>
        <li><strong>Configuraci√≥n</strong> (Secci√≥n)
            <ul>
                <li>Usuarios</li>
                <li>Roles y Permisos</li>
                <li>Auditor√≠a</li>
            </ul>
        </li>
    </ul>

    <h3>Caracter√≠sticas T√©cnicas</h3>
    <ul>
        <li>Implementaci√≥n con TypeScript usando type guards</li>
        <li>Navegaci√≥n jer√°rquica con secciones</li>
        <li>Control de acceso basado en roles (RBAC)</li>
        <li>Responsive design (m√≥vil y escritorio)</li>
    </ul>

    <h3>C√≥digo Clave</h3>
    <pre>type NavItem = {
  href: string;
  label: string;
  roles: ('SUPERADMIN' | 'MOTEL_ADMIN')[];
};

type NavSection = {
  section: string;
  items: NavItem[];
};

type NavElement = NavItem | NavSection;</pre>
</div>

<!-- SISTEMA DE IM√ÅGENES -->
<div class="page">
    <h2>2.2 Sistema de Carga de Im√°genes</h2>

    <div class="highlight">
        <strong>Archivos:</strong>
        <ul>
            <li><code>app/api/upload/route.ts</code> (nuevo)</li>
            <li><code>app/admin/advertisements/new/page.tsx</code></li>
            <li><code>app/admin/advertisements/[id]/page.tsx</code></li>
        </ul>
    </div>

    <h3>Caracter√≠sticas</h3>
    <ul>
        <li><strong>Endpoint gen√©rico:</strong> <code>/api/upload</code></li>
        <li><strong>Almacenamiento:</strong> AWS S3</li>
        <li><strong>L√≠mite de tama√±o:</strong> 10MB por archivo</li>
        <li><strong>Organizaci√≥n:</strong> Carpetas por fecha (YYYY-MM-DD)</li>
        <li><strong>Formatos soportados:</strong> Todos los tipos de imagen</li>
    </ul>

    <h3>Funcionalidad Dual</h3>
    <div class="info">
        Los formularios de publicidad ahora permiten dos m√©todos de entrada:
        <ol>
            <li><strong>Subida de archivo:</strong> Bot√≥n para seleccionar imagen desde el equipo</li>
            <li><strong>URL externa:</strong> Campo de texto para pegar URLs</li>
        </ol>
        Ambos m√©todos incluyen vista previa en tiempo real.
    </div>

    <h3>Estructura de Carpetas S3</h3>
    <pre>uploads/
  advertisements/
    2026-01-12/
      abc123.jpg
      def456.png
    2026-01-13/
      ghi789.jpg</pre>
</div>

<!-- SISTEMA DE CONTACTO -->
<div class="page">
    <h1>3. Sistema de Contacto e Inbox</h1>

    <h2>3.1 Arquitectura del Sistema</h2>

    <table>
        <thead>
            <tr>
                <th>Componente</th>
                <th>Archivo</th>
                <th>Funci√≥n</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Modelo de datos</td>
                <td><code>prisma/schema.prisma</code></td>
                <td>ContactMessage model</td>
            </tr>
            <tr>
                <td>API p√∫blica</td>
                <td><code>app/api/contact/route.ts</code></td>
                <td>POST - crear mensaje</td>
            </tr>
            <tr>
                <td>API admin (lista)</td>
                <td><code>app/api/admin/inbox/route.ts</code></td>
                <td>GET - listar mensajes</td>
            </tr>
            <tr>
                <td>API admin (acciones)</td>
                <td><code>app/api/admin/inbox/[id]/route.ts</code></td>
                <td>PATCH/DELETE</td>
            </tr>
            <tr>
                <td>Formulario web</td>
                <td><code>app/contacto/page.tsx</code></td>
                <td>Interfaz p√∫blica</td>
            </tr>
            <tr>
                <td>Formulario mobile</td>
                <td><code>screens/ContactScreen.js</code></td>
                <td>React Native</td>
            </tr>
            <tr>
                <td>Panel admin</td>
                <td><code>app/admin/inbox/page.tsx</code></td>
                <td>Gesti√≥n de mensajes</td>
            </tr>
        </tbody>
    </table>

    <h2>3.2 Modelo de Datos</h2>

    <pre>model ContactMessage {
  id          String    @id @default(cuid())
  name        String    // 2-100 caracteres
  phone       String?   // Opcional, max 50 caracteres
  message     String    // 10-1000 caracteres
  isRead      Boolean   @default(false)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([createdAt])
  @@index([isRead, createdAt])
}</pre>

    <h2>3.3 Validaciones</h2>
    <ul>
        <li><strong>Nombre:</strong> M√≠nimo 2, m√°ximo 100 caracteres (requerido)</li>
        <li><strong>Tel√©fono:</strong> Opcional, m√°ximo 50 caracteres</li>
        <li><strong>Mensaje:</strong> M√≠nimo 10, m√°ximo 1000 caracteres (requerido)</li>
        <li><strong>Sanitizaci√≥n:</strong> Trim autom√°tico en todos los campos</li>
    </ul>
</div>

<!-- PANEL DE INBOX -->
<div class="page">
    <h2>3.4 Panel de Administraci√≥n - Inbox</h2>

    <h3>Funcionalidades</h3>
    <ul>
        <li>‚úÖ Filtrado por estado (todos/le√≠dos/no le√≠dos)</li>
        <li>‚úÖ Marcar como le√≠do/no le√≠do</li>
        <li>‚úÖ Eliminar mensajes</li>
        <li>‚úÖ Visualizaci√≥n de fecha y hora</li>
        <li>‚úÖ Contador de mensajes por estado</li>
        <li>‚úÖ Acceso restringido a SUPERADMIN</li>
    </ul>

    <h3>Interfaz de Usuario</h3>
    <div class="info">
        <strong>Estados visuales:</strong>
        <ul>
            <li>Mensajes no le√≠dos: Fondo amarillo claro</li>
            <li>Mensajes le√≠dos: Fondo blanco</li>
            <li>Badge de estado: Verde (le√≠do) / Amarillo (no le√≠do)</li>
        </ul>
    </div>

    <h3>Endpoints API</h3>

    <h4>GET /api/admin/inbox</h4>
    <pre>// Query params
?status=all|read|unread

// Response
{
  "success": true,
  "messages": [
    {
      "id": "clx...",
      "name": "Juan P√©rez",
      "phone": "+595...",
      "message": "...",
      "isRead": false,
      "createdAt": "2026-01-12T..."
    }
  ]
}</pre>

    <h4>PATCH /api/admin/inbox/[id]</h4>
    <pre>// Body
{
  "isRead": true
}

// Response
{
  "success": true,
  "message": { ... }
}</pre>

    <h4>DELETE /api/admin/inbox/[id]</h4>
    <pre>// Response
{
  "success": true,
  "message": "Mensaje eliminado exitosamente"
}</pre>
</div>

<!-- MEJORAS MOBILE -->
<div class="page">
    <h1>4. Mejoras Mobile App</h1>

    <h2>4.1 Reorganizaci√≥n Pantalla de Perfil</h2>

    <div class="highlight">
        <strong>Archivo:</strong> <code>app/jahatelo-app/screens/ProfileScreen.js</code>
    </div>

    <h3>Estructura Nueva</h3>

    <table>
        <thead>
            <tr>
                <th>Elemento</th>
                <th>Tipo</th>
                <th>Acci√≥n</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Registrar tu motel</td>
                <td>Standalone</td>
                <td>Navegaci√≥n a formulario</td>
            </tr>
            <tr>
                <td colspan="3" style="background: #f0f0f0; font-weight: bold;">Almacenamiento y datos</td>
            </tr>
            <tr>
                <td>- Almacenamiento</td>
                <td>Info</td>
                <td>Solo lectura</td>
            </tr>
            <tr>
                <td>- Cach√© de im√°genes</td>
                <td>Info</td>
                <td>Solo lectura</td>
            </tr>
            <tr>
                <td>- Archivos temporales</td>
                <td>Info</td>
                <td>Solo lectura</td>
            </tr>
            <tr>
                <td>- Limpiar cach√©</td>
                <td>Acci√≥n</td>
                <td>Funci√≥n de limpieza</td>
            </tr>
            <tr>
                <td>- Limpiar todo</td>
                <td>Acci√≥n</td>
                <td>Reset completo</td>
            </tr>
            <tr>
                <td colspan="3" style="height: 10px;"></td>
            </tr>
            <tr>
                <td>Cont√°ctanos</td>
                <td>Standalone</td>
                <td>Navegaci√≥n a ContactScreen</td>
            </tr>
            <tr>
                <td>Bases y condiciones</td>
                <td>Standalone</td>
                <td>WebView</td>
            </tr>
            <tr>
                <td>Pol√≠tica de privacidad</td>
                <td>Standalone</td>
                <td>WebView</td>
            </tr>
            <tr>
                <td>Sobre Jahatelo</td>
                <td>Standalone</td>
                <td>Pantalla informativa</td>
            </tr>
        </tbody>
    </table>

    <h3>Cambios Realizados</h3>
    <ul>
        <li>Eliminaci√≥n de secci√≥n "Explora Jahatelo"</li>
        <li>Eliminaci√≥n de header "Legal y ayuda"</li>
        <li>√önico grupo de secci√≥n: "Almacenamiento y datos"</li>
        <li>Todos los dem√°s elementos son independientes</li>
    </ul>
</div>

<!-- SISTEMA DE SPLASH -->
<div class="page">
    <h1>5. Sistema de Splash Screen</h1>

    <h2>5.1 Problema Inicial</h2>

    <div class="highlight">
        <strong>Situaci√≥n:</strong> El usuario report√≥ ver dos splash screens en Expo Go a pesar de cambiar las im√°genes en <code>app.json</code>.
    </div>

    <h3>Causa Ra√≠z Identificada</h3>
    <p>Expo Go muestra su propio splash screen nativo antes de cargar la aplicaci√≥n React Native. La configuraci√≥n en <code>app.json</code> solo aplica en builds nativos (producci√≥n), no en Expo Go.</p>

    <div class="info">
        <strong>Aprendizaje clave:</strong>
        <ul>
            <li><strong>Expo Go:</strong> Muestra splash de Expo + splash de React (AnimatedSplash.js)</li>
            <li><strong>Build nativo:</strong> Solo muestra splash configurado en app.json</li>
        </ul>
    </div>

    <h2>5.2 Soluci√≥n Implementada</h2>

    <div class="highlight">
        <strong>Archivo:</strong> <code>app/jahatelo-app/components/AnimatedSplash.js</code>
    </div>

    <h3>Evoluci√≥n del Componente</h3>

    <table>
        <thead>
            <tr>
                <th>Versi√≥n</th>
                <th>Implementaci√≥n</th>
                <th>Resultado</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>Im√°genes est√°ticas (PNG)</td>
                <td>Sin animaci√≥n</td>
            </tr>
            <tr>
                <td>2</td>
                <td>Lottie animation solo</td>
                <td>Animaci√≥n sin texto</td>
            </tr>
            <tr>
                <td>3</td>
                <td>Lottie + wordmark PNG</td>
                <td>Logo + marca de texto</td>
            </tr>
            <tr>
                <td>4 (Final)</td>
                <td>Lottie 30% m√°s grande + timing optimizado</td>
                <td>‚úÖ Implementaci√≥n actual</td>
            </tr>
        </tbody>
    </table>

    <h3>Especificaciones Finales</h3>
    <ul>
        <li><strong>Logo Lottie:</strong> 338x338 px (30% m√°s grande que original)</li>
        <li><strong>Wordmark:</strong> 220x66 px</li>
        <li><strong>Timing:</strong> Texto aparece 1 segundo antes (en paralelo con pin drop)</li>
        <li><strong>Fondo:</strong> Blanco (#FFFFFF)</li>
    </ul>
</div>

<!-- ANIMACI√ìN DETALLADA -->
<div class="page">
    <h2>5.3 Secuencia de Animaci√≥n</h2>

    <pre>1. Fade in + Scale up del logo (500ms)
   ‚îú‚îÄ opacity: 0 ‚Üí 1
   ‚îî‚îÄ scale: 0.5 ‚Üí 1 (spring animation)

2. Pin drop + Texto en paralelo
   ‚îú‚îÄ Logo translateY: -50 ‚Üí 0 (spring)
   ‚îî‚îÄ Texto opacity: 0 ‚Üí 1 (400ms, simult√°neo)

3. Delay final (150ms)

4. onFinish() ‚Üí App principal</pre>

    <h3>C√≥digo de Animaci√≥n</h3>
    <pre>Animated.sequence([
  // Fase 1: Entrada del logo
  Animated.parallel([
    Animated.timing(fadeAnim, {
      toValue: 1,
      duration: 500,
      useNativeDriver: true,
    }),
    Animated.spring(scaleAnim, {
      toValue: 1,
      tension: 40,
      friction: 6,
      useNativeDriver: true,
    }),
  ]),

  // Fase 2: Pin drop + Texto (paralelo)
  Animated.parallel([
    Animated.spring(pinDropAnim, {
      toValue: 0,
      tension: 50,
      friction: 7,
      useNativeDriver: true,
    }),
    Animated.timing(textFadeAnim, {
      toValue: 1,
      duration: 400,
      useNativeDriver: true,
    }),
  ]),

  // Fase 3: Pausa breve
  Animated.delay(150),
]).start();</pre>

    <h2>5.4 Configuraci√≥n App.js</h2>

    <pre>import * as SplashScreen from 'expo-splash-screen';

// Prevenir auto-hide del splash nativo
SplashScreen.preventAutoHideAsync();

export default function App() {
  useEffect(() => {
    // Ocultar inmediatamente para mostrar AnimatedSplash
    SplashScreen.hideAsync();
  }, []);

  // ...
}</pre>
</div>

<!-- ARCHIVOS CLAVE -->
<div class="page">
    <h1>6. Archivos T√©cnicos Clave</h1>

    <h2>6.1 Backend - Web Admin</h2>

    <table>
        <thead>
            <tr>
                <th>Archivo</th>
                <th>Prop√≥sito</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>app/admin/layout.tsx</code></td>
                <td>Navegaci√≥n admin con secciones</td>
                <td>‚úÖ Completado</td>
            </tr>
            <tr>
                <td><code>app/api/upload/route.ts</code></td>
                <td>Endpoint gen√©rico S3 upload</td>
                <td>‚úÖ Completado</td>
            </tr>
            <tr>
                <td><code>app/api/contact/route.ts</code></td>
                <td>API p√∫blica de contacto</td>
                <td>‚úÖ Completado</td>
            </tr>
            <tr>
                <td><code>app/api/admin/inbox/route.ts</code></td>
                <td>Listado de mensajes (admin)</td>
                <td>‚úÖ Completado</td>
            </tr>
            <tr>
                <td><code>app/api/admin/inbox/[id]/route.ts</code></td>
                <td>CRUD individual de mensajes</td>
                <td>‚úÖ Completado</td>
            </tr>
            <tr>
                <td><code>app/admin/inbox/page.tsx</code></td>
                <td>UI de gesti√≥n de inbox</td>
                <td>‚úÖ Completado</td>
            </tr>
            <tr>
                <td><code>app/contacto/page.tsx</code></td>
                <td>Formulario p√∫blico de contacto</td>
                <td>‚úÖ Completado</td>
            </tr>
            <tr>
                <td><code>app/admin/advertisements/new/page.tsx</code></td>
                <td>Crear publicidad con upload</td>
                <td>‚úÖ Completado</td>
            </tr>
            <tr>
                <td><code>app/admin/advertisements/[id]/page.tsx</code></td>
                <td>Editar publicidad con upload</td>
                <td>‚úÖ Completado</td>
            </tr>
            <tr>
                <td><code>prisma/schema.prisma</code></td>
                <td>Modelo ContactMessage</td>
                <td>‚úÖ Completado</td>
            </tr>
        </tbody>
    </table>

    <h2>6.2 Mobile App</h2>

    <table>
        <thead>
            <tr>
                <th>Archivo</th>
                <th>Prop√≥sito</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>screens/ProfileScreen.js</code></td>
                <td>Perfil reorganizado</td>
                <td>‚úÖ Completado</td>
            </tr>
            <tr>
                <td><code>screens/ContactScreen.js</code></td>
                <td>Formulario de contacto mobile</td>
                <td>‚úÖ Completado</td>
            </tr>
            <tr>
                <td><code>components/AnimatedSplash.js</code></td>
                <td>Splash con Lottie + wordmark</td>
                <td>‚úÖ Completado</td>
            </tr>
            <tr>
                <td><code>App.js</code></td>
                <td>Control de splash nativo</td>
                <td>‚úÖ Completado</td>
            </tr>
            <tr>
                <td><code>app.json</code></td>
                <td>Config splash para builds nativos</td>
                <td>‚úÖ Completado</td>
            </tr>
            <tr>
                <td><code>screens/MapScreen.js</code></td>
                <td>Mapa con markers est√°ndar</td>
                <td>‚úÖ Estado original</td>
            </tr>
        </tbody>
    </table>
</div>

<!-- ERRORES Y RESOLUCIONES -->
<div class="page">
    <h1>7. Errores y Resoluciones</h1>

    <h2>7.1 Error de Migraciones Prisma</h2>

    <div class="highlight">
        <strong>Error:</strong> P3006 - Migration failed to apply cleanly<br>
        <strong>Error:</strong> P1001 - Can't reach database server
    </div>

    <h3>Contexto</h3>
    <p>Al intentar ejecutar <code>npx prisma migrate dev</code> para agregar el modelo ContactMessage, se presentaron fallos de conexi√≥n y aplicaci√≥n de migraciones.</p>

    <h3>Soluci√≥n Aplicada</h3>
    <pre>npx prisma generate</pre>

    <div class="info">
        <strong>Resultado:</strong> Se actualiz√≥ el cliente Prisma sin ejecutar migraciones, permitiendo usar el nuevo modelo ContactMessage sin modificar la base de datos directamente.
    </div>

    <h2>7.2 Conflicto de Edici√≥n de Archivo</h2>

    <div class="highlight">
        <strong>Error:</strong> File has been modified since read
    </div>

    <h3>Contexto</h3>
    <p>Al intentar editar <code>AnimatedSplash.js</code>, el archivo hab√≠a sido modificado manualmente por el usuario despu√©s de la √∫ltima lectura.</p>

    <h3>Soluci√≥n</h3>
    <ul>
        <li>Re-leer el archivo inmediatamente antes de editar</li>
        <li>Verificar timestamp de √∫ltima modificaci√≥n</li>
        <li>Aplicar cambios sobre la versi√≥n m√°s reciente</li>
    </ul>

    <h3>Prevenci√≥n</h3>
    <p>Siempre ejecutar <code>Read</code> tool inmediatamente antes de cualquier operaci√≥n de <code>Edit</code> o <code>Write</code>.</p>

    <h2>7.3 Doble Splash Screen</h2>

    <div class="highlight">
        <strong>Problema:</strong> Usuario report√≥ ver dos splash screens en Expo Go
    </div>

    <h3>An√°lisis</h3>
    <p>No era un error, sino una limitaci√≥n de Expo Go. La primera pantalla es el splash de Expo Go, y la segunda es el componente React <code>AnimatedSplash.js</code>.</p>

    <h3>Resoluci√≥n</h3>
    <div class="success">
        <strong>Explicaci√≥n al usuario:</strong> En builds nativos (producci√≥n), solo aparecer√° un splash configurado en app.json. Expo Go siempre muestra su propio splash primero.
        <br><br>
        <strong>Acci√≥n tomada:</strong> Se optimiz√≥ AnimatedSplash.js para mejorar la experiencia en el segundo splash.
    </div>
</div>

<!-- STACK TECNOL√ìGICO -->
<div class="page">
    <h1>8. Stack Tecnol√≥gico</h1>

    <h2>8.1 Frontend Web</h2>
    <table>
        <tr>
            <th>Tecnolog√≠a</th>
            <th>Versi√≥n/Info</th>
            <th>Uso</th>
        </tr>
        <tr>
            <td>Next.js</td>
            <td>14+ (App Router)</td>
            <td>Framework principal web</td>
        </tr>
        <tr>
            <td>React</td>
            <td>18+</td>
            <td>Librer√≠a UI</td>
        </tr>
        <tr>
            <td>TypeScript</td>
            <td>5+</td>
            <td>Tipado est√°tico</td>
        </tr>
        <tr>
            <td>Tailwind CSS</td>
            <td>3+</td>
            <td>Estilos</td>
        </tr>
    </table>

    <h2>8.2 Backend</h2>
    <table>
        <tr>
            <th>Tecnolog√≠a</th>
            <th>Uso</th>
        </tr>
        <tr>
            <td>Next.js API Routes</td>
            <td>RESTful endpoints</td>
        </tr>
        <tr>
            <td>Prisma ORM</td>
            <td>Database access layer</td>
        </tr>
        <tr>
            <td>PostgreSQL</td>
            <td>Base de datos relacional</td>
        </tr>
        <tr>
            <td>AWS S3</td>
            <td>Almacenamiento de archivos</td>
        </tr>
    </table>

    <h2>8.3 Mobile App</h2>
    <table>
        <tr>
            <th>Tecnolog√≠a</th>
            <th>Uso</th>
        </tr>
        <tr>
            <td>React Native</td>
            <td>Framework mobile</td>
        </tr>
        <tr>
            <td>Expo</td>
            <td>Tooling y desarrollo</td>
        </tr>
        <tr>
            <td>React Navigation</td>
            <td>Navegaci√≥n entre pantallas</td>
        </tr>
        <tr>
            <td>Lottie</td>
            <td>Animaciones vectoriales</td>
        </tr>
        <tr>
            <td>React Native Maps</td>
            <td>Mapas y geolocalizaci√≥n</td>
        </tr>
        <tr>
            <td>Expo Location</td>
            <td>Permisos de ubicaci√≥n</td>
        </tr>
    </table>

    <h2>8.4 Infraestructura</h2>
    <ul>
        <li><strong>Hosting Web:</strong> Vercel / Railway</li>
        <li><strong>Database:</strong> PostgreSQL (managed)</li>
        <li><strong>Storage:</strong> AWS S3</li>
        <li><strong>CDN:</strong> CloudFront (S3 integrado)</li>
        <li><strong>Mobile:</strong> Expo Go (dev) / EAS Build (prod)</li>
    </ul>
</div>

<!-- CONVENCIONES Y PATRONES -->
<div class="page">
    <h1>9. Convenciones y Patrones</h1>

    <h2>9.1 Naming Conventions</h2>

    <table>
        <tr>
            <th>Elemento</th>
            <th>Convenci√≥n</th>
            <th>Ejemplo</th>
        </tr>
        <tr>
            <td>Componentes React</td>
            <td>PascalCase</td>
            <td><code>AnimatedSplash.js</code></td>
        </tr>
        <tr>
            <td>Screens</td>
            <td>PascalCase + "Screen"</td>
            <td><code>ContactScreen.js</code></td>
        </tr>
        <tr>
            <td>API Routes</td>
            <td>lowercase</td>
            <td><code>/api/contact</code></td>
        </tr>
        <tr>
            <td>Variables</td>
            <td>camelCase</td>
            <td><code>userLocation</code></td>
        </tr>
        <tr>
            <td>Constantes</td>
            <td>UPPER_SNAKE_CASE</td>
            <td><code>API_URL</code></td>
        </tr>
        <tr>
            <td>Archivos utilitarios</td>
            <td>kebab-case</td>
            <td><code>use-favorites.js</code></td>
        </tr>
    </table>

    <h2>9.2 Estructura de Carpetas</h2>

    <h3>Web (Next.js)</h3>
    <pre>app/
  ‚îú‚îÄ‚îÄ admin/              # Panel administrativo
  ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx      # Layout con navegaci√≥n
  ‚îÇ   ‚îú‚îÄ‚îÄ inbox/          # M√≥dulo inbox
  ‚îÇ   ‚îî‚îÄ‚îÄ advertisements/ # M√≥dulo publicidad
  ‚îú‚îÄ‚îÄ api/                # Backend endpoints
  ‚îÇ   ‚îú‚îÄ‚îÄ contact/        # API p√∫blica
  ‚îÇ   ‚îú‚îÄ‚îÄ admin/          # APIs protegidas
  ‚îÇ   ‚îî‚îÄ‚îÄ upload/         # Upload gen√©rico
  ‚îú‚îÄ‚îÄ contacto/           # P√°ginas p√∫blicas
  ‚îî‚îÄ‚îÄ components/         # Componentes compartidos

prisma/
  ‚îî‚îÄ‚îÄ schema.prisma       # Modelos de datos</pre>

    <h3>Mobile (React Native)</h3>
    <pre>app/jahatelo-app/
  ‚îú‚îÄ‚îÄ screens/            # Pantallas principales
  ‚îÇ   ‚îú‚îÄ‚îÄ HomeScreen.js
  ‚îÇ   ‚îú‚îÄ‚îÄ ProfileScreen.js
  ‚îÇ   ‚îî‚îÄ‚îÄ ContactScreen.js
  ‚îú‚îÄ‚îÄ components/         # Componentes reutilizables
  ‚îÇ   ‚îú‚îÄ‚îÄ AnimatedSplash.js
  ‚îÇ   ‚îî‚îÄ‚îÄ OfflineIndicator.js
  ‚îú‚îÄ‚îÄ navigation/         # Configuraci√≥n de navegaci√≥n
  ‚îú‚îÄ‚îÄ hooks/              # Custom hooks
  ‚îú‚îÄ‚îÄ contexts/           # React contexts
  ‚îî‚îÄ‚îÄ constants/          # Constantes y temas</pre>
</div>

<!-- SEGURIDAD -->
<div class="page">
    <h2>9.3 Patrones de Seguridad</h2>

    <h3>Control de Acceso</h3>
    <ul>
        <li><strong>Role-Based Access Control (RBAC)</strong>
            <ul>
                <li>SUPERADMIN: Acceso completo</li>
                <li>MOTEL_ADMIN: Acceso limitado a su motel</li>
            </ul>
        </li>
        <li><strong>Middleware de autenticaci√≥n</strong> en todas las rutas admin</li>
        <li><strong>Validaci√≥n de sesi√≥n</strong> en cada request</li>
    </ul>

    <h3>Validaci√≥n de Datos</h3>
    <pre>// Ejemplo: Validaci√≥n en API de contacto
if (!name || name.trim().length < 2) {
  return NextResponse.json(
    { error: 'Nombre requerido (m√≠n. 2 caracteres)' },
    { status: 400 }
  );
}

if (message.trim().length < 10 || message.length > 1000) {
  return NextResponse.json(
    { error: 'Mensaje debe tener 10-1000 caracteres' },
    { status: 400 }
  );
}</pre>

    <h3>Upload Seguro</h3>
    <ul>
        <li>L√≠mite de tama√±o: 10MB</li>
        <li>Validaci√≥n de tipo de archivo</li>
        <li>Nombres √∫nicos con timestamp</li>
        <li>Almacenamiento en bucket privado S3</li>
        <li>URLs presignadas para acceso controlado</li>
    </ul>

    <h2>9.4 Performance</h2>

    <h3>Optimizaciones Web</h3>
    <ul>
        <li>Server Components por defecto (Next.js 14)</li>
        <li>Lazy loading de componentes pesados</li>
        <li>Caching de respuestas API</li>
        <li>Optimizaci√≥n de im√°genes autom√°tica (Next.js Image)</li>
    </ul>

    <h3>Optimizaciones Mobile</h3>
    <ul>
        <li><strong>React.memo</strong> en markers del mapa</li>
        <li><strong>useNativeDriver: true</strong> en animaciones</li>
        <li><strong>tracksViewChanges: false</strong> en markers est√°ticos</li>
        <li>Cache en memoria para datos del mapa (5 minutos)</li>
        <li>Lazy loading de screens con React Navigation</li>
    </ul>
</div>

<!-- M√âTRICAS Y RESULTADOS -->
<div class="page">
    <h1>10. M√©tricas y Resultados</h1>

    <h2>10.1 Archivos Creados</h2>

    <div class="success">
        <strong>Total: 7 archivos nuevos</strong>
    </div>

    <ul>
        <li><code>app/api/upload/route.ts</code></li>
        <li><code>app/api/contact/route.ts</code></li>
        <li><code>app/api/admin/inbox/route.ts</code></li>
        <li><code>app/api/admin/inbox/[id]/route.ts</code></li>
        <li><code>app/admin/inbox/page.tsx</code></li>
        <li><code>app/contacto/page.tsx</code></li>
        <li><code>app/jahatelo-app/screens/ContactScreen.js</code></li>
    </ul>

    <h2>10.2 Archivos Modificados</h2>

    <div class="info">
        <strong>Total: 6 archivos modificados</strong>
    </div>

    <ul>
        <li><code>app/admin/layout.tsx</code> - Navegaci√≥n con secciones</li>
        <li><code>app/admin/advertisements/new/page.tsx</code> - Upload de im√°genes</li>
        <li><code>app/admin/advertisements/[id]/page.tsx</code> - Upload de im√°genes</li>
        <li><code>app/jahatelo-app/screens/ProfileScreen.js</code> - Reorganizaci√≥n</li>
        <li><code>app/jahatelo-app/components/AnimatedSplash.js</code> - Lottie + timing</li>
        <li><code>app/jahatelo-app/App.js</code> - Control de splash</li>
    </ul>

    <h2>10.3 Cambios en Base de Datos</h2>

    <table>
        <tr>
            <th>Modelo</th>
            <th>Campos</th>
            <th>√çndices</th>
        </tr>
        <tr>
            <td>ContactMessage</td>
            <td>7</td>
            <td>2</td>
        </tr>
    </table>

    <h2>10.4 Endpoints API Creados</h2>

    <table>
        <tr>
            <th>Endpoint</th>
            <th>M√©todo</th>
            <th>Acceso</th>
        </tr>
        <tr>
            <td>/api/upload</td>
            <td>POST</td>
            <td>Autenticado</td>
        </tr>
        <tr>
            <td>/api/contact</td>
            <td>POST</td>
            <td>P√∫blico</td>
        </tr>
        <tr>
            <td>/api/admin/inbox</td>
            <td>GET</td>
            <td>SUPERADMIN</td>
        </tr>
        <tr>
            <td>/api/admin/inbox/[id]</td>
            <td>PATCH</td>
            <td>SUPERADMIN</td>
        </tr>
        <tr>
            <td>/api/admin/inbox/[id]</td>
            <td>DELETE</td>
            <td>SUPERADMIN</td>
        </tr>
    </table>

    <div class="success">
        <strong>Total: 5 endpoints nuevos (3 rutas √∫nicas)</strong>
    </div>
</div>

<!-- PR√ìXIMOS PASOS -->
<div class="page">
    <h1>11. Pr√≥ximos Pasos Sugeridos</h1>

    <h2>11.1 Funcionalidades Pendientes</h2>

    <h3>Alta Prioridad</h3>
    <ul>
        <li>üîî Sistema de notificaciones push para mensajes de contacto</li>
        <li>üìä Dashboard con m√©tricas de mensajes recibidos</li>
        <li>üìß Auto-respuesta por email al enviar formulario de contacto</li>
        <li>üîç B√∫squeda y filtros avanzados en inbox</li>
    </ul>

    <h3>Media Prioridad</h3>
    <ul>
        <li>üì± Deep linking para notificaciones mobile</li>
        <li>üè∑Ô∏è Sistema de etiquetas/categor√≠as para mensajes</li>
        <li>üë• Asignaci√≥n de mensajes a usuarios espec√≠ficos</li>
        <li>üìÅ Archivado de mensajes antiguos</li>
        <li>üìà Analytics de uso de la app</li>
    </ul>

    <h3>Baja Prioridad</h3>
    <ul>
        <li>üé® Temas personalizables (dark mode)</li>
        <li>üåê Internacionalizaci√≥n (i18n)</li>
        <li>üîä Respuestas autom√°ticas con IA</li>
        <li>üìä Exportaci√≥n de datos a Excel/CSV</li>
    </ul>

    <h2>11.2 Mejoras T√©cnicas</h2>

    <h3>Performance</h3>
    <ul>
        <li>Implementar React Query para cach√© de API calls</li>
        <li>Optimizar renders con useMemo/useCallback</li>
        <li>Lazy loading de m√≥dulos admin</li>
        <li>Service Worker para offline-first</li>
    </ul>

    <h3>Testing</h3>
    <ul>
        <li>Unit tests para componentes cr√≠ticos (Jest)</li>
        <li>Integration tests para flujos de usuario (Cypress)</li>
        <li>E2E tests para formularios (Playwright)</li>
        <li>API testing automatizado (Supertest)</li>
    </ul>

    <h3>DevOps</h3>
    <ul>
        <li>CI/CD pipeline completo (GitHub Actions)</li>
        <li>Staging environment</li>
        <li>Rollback autom√°tico en caso de errores</li>
        <li>Monitoreo con Sentry/LogRocket</li>
    </ul>

    <h2>11.3 Documentaci√≥n</h2>
    <ul>
        <li>üìñ Documentaci√≥n de APIs con Swagger/OpenAPI</li>
        <li>üìö Gu√≠a de estilo de c√≥digo (ESLint + Prettier)</li>
        <li>üéì Tutoriales para nuevos desarrolladores</li>
        <li>üìã Runbook para operaciones comunes</li>
    </ul>
</div>

<!-- CONCLUSIONES -->
<div class="page">
    <h1>12. Conclusiones</h1>

    <h2>12.1 Logros Principales</h2>

    <div class="success">
        <h3>‚úÖ Sistema Completo de Contacto</h3>
        <p>Implementaci√≥n end-to-end desde formulario p√∫blico hasta panel de administraci√≥n con gesti√≥n completa de mensajes.</p>
    </div>

    <div class="success">
        <h3>‚úÖ Mejora en Experiencia de Usuario</h3>
        <p>Reorganizaci√≥n de interfaces mobile y web para mejor usabilidad y flujo de navegaci√≥n.</p>
    </div>

    <div class="success">
        <h3>‚úÖ Infraestructura Escalable</h3>
        <p>Endpoint gen√©rico de upload permite agregar funcionalidad de im√°genes a cualquier m√≥dulo futuro.</p>
    </div>

    <div class="success">
        <h3>‚úÖ Splash Screen Optimizado</h3>
        <p>Animaci√≥n profesional con Lottie que mejora la primera impresi√≥n de la aplicaci√≥n.</p>
    </div>

    <h2>12.2 Lecciones Aprendidas</h2>

    <h3>Expo Go vs Build Nativo</h3>
    <p>La diferencia entre desarrollo en Expo Go y builds nativos es cr√≠tica para entender el comportamiento del splash screen y otras funcionalidades nativas.</p>

    <h3>Validaci√≥n en M√∫ltiples Capas</h3>
    <p>Implementar validaci√≥n tanto en frontend como backend garantiza integridad de datos y mejor experiencia de usuario.</p>

    <h3>TypeScript Type Guards</h3>
    <p>Usar type guards permite crear estructuras de navegaci√≥n flexibles y type-safe sin sacrificar DX.</p>

    <h2>12.3 Calidad del C√≥digo</h2>

    <table>
        <tr>
            <th>Aspecto</th>
            <th>Estado</th>
        </tr>
        <tr>
            <td>Tipado TypeScript</td>
            <td>‚úÖ 100% en archivos .ts/.tsx</td>
        </tr>
        <tr>
            <td>Validaci√≥n de datos</td>
            <td>‚úÖ Backend y frontend</td>
        </tr>
        <tr>
            <td>Manejo de errores</td>
            <td>‚úÖ Try-catch + mensajes claros</td>
        </tr>
        <tr>
            <td>Seguridad</td>
            <td>‚úÖ RBAC + validaciones</td>
        </tr>
        <tr>
            <td>Performance</td>
            <td>‚úÖ Optimizaciones aplicadas</td>
        </tr>
        <tr>
            <td>Documentaci√≥n</td>
            <td>‚ö†Ô∏è Comentarios inline presentes</td>
        </tr>
    </table>
</div>

<!-- CONTACTO Y REFERENCIAS -->
<div class="page">
    <h1>13. Referencias y Recursos</h1>

    <h2>13.1 Documentaci√≥n Oficial</h2>

    <table>
        <tr>
            <th>Tecnolog√≠a</th>
            <th>URL</th>
        </tr>
        <tr>
            <td>Next.js 14</td>
            <td>https://nextjs.org/docs</td>
        </tr>
        <tr>
            <td>React Native</td>
            <td>https://reactnative.dev/docs</td>
        </tr>
        <tr>
            <td>Expo</td>
            <td>https://docs.expo.dev</td>
        </tr>
        <tr>
            <td>Prisma</td>
            <td>https://www.prisma.io/docs</td>
        </tr>
        <tr>
            <td>Lottie</td>
            <td>https://lottiefiles.com/docs</td>
        </tr>
        <tr>
            <td>React Navigation</td>
            <td>https://reactnavigation.org/docs</td>
        </tr>
    </table>

    <h2>13.2 Herramientas de Desarrollo</h2>

    <ul>
        <li><strong>IDE:</strong> VS Code / WebStorm</li>
        <li><strong>API Testing:</strong> Postman / Insomnia</li>
        <li><strong>Database Client:</strong> Prisma Studio / pgAdmin</li>
        <li><strong>Mobile Testing:</strong> Expo Go / Simuladores nativos</li>
        <li><strong>Version Control:</strong> Git + GitHub</li>
    </ul>

    <h2>13.3 Comandos √ötiles</h2>

    <h3>Desarrollo Web</h3>
    <pre>npm run dev              # Iniciar dev server
npm run build            # Build de producci√≥n
npm run lint             # Ejecutar linter
npx prisma studio        # Abrir Prisma Studio
npx prisma generate      # Generar cliente Prisma
npx prisma migrate dev   # Ejecutar migraciones</pre>

    <h3>Desarrollo Mobile</h3>
    <pre>npx expo start           # Iniciar Expo dev server
npx expo start -c        # Iniciar con cache limpio
npx expo install         # Instalar dependencias compatibles
npx expo prebuild        # Generar proyectos nativos
eas build --platform all # Build de producci√≥n (EAS)</pre>

    <h2>13.4 Informaci√≥n del Proyecto</h2>

    <table>
        <tr>
            <th>Propiedad</th>
            <th>Valor</th>
        </tr>
        <tr>
            <td>Proyecto</td>
            <td>Jahatelo</td>
        </tr>
        <tr>
            <td>Empresa</td>
            <td>MBARETECH</td>
        </tr>
        <tr>
            <td>Fecha</td>
            <td>Enero 2026</td>
        </tr>
        <tr>
            <td>Repositorio</td>
            <td>IA/MBARETECH/projects/jahatelo</td>
        </tr>
        <tr>
            <td>Stack Principal</td>
            <td>Next.js + React Native + Prisma</td>
        </tr>
    </table>

    <div style="margin-top: 100px; padding-top: 50px; border-top: 2px solid #822DE2; text-align: center; color: #999;">
        <p><strong>Fin del documento</strong></p>
        <p>Este documento fue generado autom√°ticamente como resumen de las implementaciones realizadas en el proyecto Jahatelo.</p>
    </div>
</div>

</body>
</html>
